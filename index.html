<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gestão de Equipamentos - Usina</title>
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        .admin-btn { background:#e74c3c; color:white; padding:8px 16px; border-radius:20px; border:none; cursor:pointer; }
        .admin-btn:hover { opacity:0.9; }
    </style>
</head>
<body>
    <script>
        // Verificação rápida
        const sessao = localStorage.getItem('gestao_equipamentos_sessao');
        if (!sessao) window.location.href = 'login.html';
    </script>

   <script>
    // Verificação de sessão
    (function() {
        const sessao = localStorage.getItem('gestao_equipamentos_sessao');
        if (!sessao) window.location.href = 'login.html';
    })();
</script>

    <div class="container">
        <header>
            <div style="display:flex; justify-content:space-between; align-items:center; flex-wrap:wrap; gap:20px;">
                <div><h1><i class="fas fa-industry"></i> Gestão de Equipamentos</h1>
                    <p class="subtitle">Sistema de gerenciamento de equipamentos</p>
                </div>
                <div>
                    <button id="theme-toggle" class="theme-toggle"><i class="fas fa-moon"></i></button>
                    <div class="user-info-container">
                        <div class="user-info"><i class="fas fa-user-circle"></i><span id="current-user">Carregando...</span></div>
                        <button id="logout-btn" class="logout-btn"><i class="fas fa-sign-out-alt"></i> Sair</button>
                        <button onclick="window.location.href='admin-usuarios.html'" class="admin-btn"><i class="fas fa-users-cog"></i> Admin</button>
                    </div>
                </div>
            </div>
            <div class="stats-bar">
                <div class="stat"><span class="stat-value" id="total-equipamentos">0</span><span class="stat-label">Total</span></div>
                <div class="stat"><span class="stat-value apto" id="aptos-operar">0</span><span class="stat-label">Aptos</span></div>
                <div class="stat"><span class="stat-value nao-apto" id="nao-aptos">0</span><span class="stat-label">Não Aptos</span></div>
                <div class="stat"><span class="stat-value pendente" id="total-pendencias">0</span><span class="stat-label">Pendências</span></div>
            </div>
        </header>

        <div class="main-content">
            <div class="sidebar">
                <div class="filters">
                    <h3><i class="fas fa-filter"></i> Filtros</h3>
                    <select id="status-filter"><option value="all">Todos Status</option><option value="apto">Apto</option><option value="nao-apto">Não Apto</option></select>
                    <select id="pendencia-filter"><option value="all">Todas Pendências</option><option value="com-pendencia">Com</option><option value="sem-pendencia">Sem</option></select>
                    <select id="setor-filter"><option value="all">Todos Setores</option><!-- opções reduzidas --></select>
                    <input type="text" id="search" placeholder="Buscar...">
                    <button id="reset-filters" class="btn-secondary"><i class="fas fa-redo"></i> Limpar</button>
                </div>
                <div class="actions">
                    <button id="add-equipamento" class="btn-primary"><i class="fas fa-plus-circle"></i> Novo Equipamento</button>
                    <button id="add-pendencia" class="btn-secondary"><i class="fas fa-exclamation-circle"></i> Nova Pendência</button>
                    <button id="export-data" class="btn-secondary"><i class="fas fa-file-export"></i> Exportar</button>
                </div>
            </div>

            <div class="content">
                <div class="content-header">
                    <h2><i class="fas fa-list"></i> Equipamentos <span id="total-filtrado">(0)</span></h2>
                    <div><button id="view-list" class="view-btn active"><i class="fas fa-list"></i></button>
                    <button id="view-grid" class="view-btn"><i class="fas fa-th-large"></i></button></div>
                </div>
                <div class="equipamentos-container" id="equipamentos-container">
                    <div class="loading"><i class="fas fa-cog fa-spin"></i><p>Carregando...</p></div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modais básicos (reduzidos) -->
    <div id="equipamento-modal" class="modal"><!-- conteúdo reduzido --></div>
    <div id="pendencia-modal" class="modal"><!-- conteúdo reduzido --></div>
    <div id="detalhes-modal" class="modal"><!-- conteúdo reduzido --></div>

    <script src="config.js"></script>
    <script src="app.js"></script>
</body>
</html>

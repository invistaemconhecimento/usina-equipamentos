<!DOCTYPE html>
<html lang="pt-br">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login - Gestão de Equipamentos</title>
    <style>
        * { margin:0; padding:0; box-sizing:border-box; }
        body { font-family:'Roboto',sans-serif; background:linear-gradient(135deg,#1a1a2e,#16213e); height:100vh; display:flex; justify-content:center; align-items:center; }
        .login-container { background:rgba(255,255,255,0.95); border-radius:20px; box-shadow:0 20px 50px rgba(0,0,0,0.3); max-width:450px; width:90%; animation:slideUp 0.8s ease-out; }
        @keyframes slideUp { from{opacity:0;transform:translateY(50px)} to{opacity:1;transform:translateY(0)} }
        .login-header { background:linear-gradient(135deg,#2c3e50,#3498db); color:white; padding:35px 30px; text-align:center; }
        .login-body { padding:35px; }
        .login-form { display:flex; flex-direction:column; gap:25px; }
        .form-group { display:flex; flex-direction:column; gap:10px; }
        .input-with-icon { position:relative; }
        .input-with-icon i { position:absolute; left:15px; top:50%; transform:translateY(-50%); color:#7f8c8d; }
        .input-with-icon input { width:100%; padding:15px 15px 15px 50px; border:2px solid #e0e0e0; border-radius:10px; font-size:16px; transition:0.3s; }
        .input-with-icon input:focus { outline:none; border-color:#3498db; box-shadow:0 0 0 3px rgba(52,152,219,0.1); }
        .toggle-password { position:absolute; right:15px; top:50%; transform:translateY(-50%); background:none; border:none; color:#7f8c8d; cursor:pointer; }
        .login-btn { background:linear-gradient(135deg,#2ecc71,#27ae60); color:white; border:none; padding:17px; border-radius:10px; font-size:16px; cursor:pointer; transition:0.3s; }
        .login-btn:hover { transform:translateY(-3px); box-shadow:0 10px 20px rgba(46,204,113,0.3); }
        .error-message { background:#ffeaea; color:#c33; padding:15px; border-radius:10px; border-left:4px solid #e74c3c; display:none; align-items:center; gap:12px; margin-bottom:20px; }
        .error-message.show { display:flex; }
        .levels-grid { display:grid; grid-template-columns:repeat(auto-fill,minmax(120px,1fr)); gap:10px; margin-top:15px; }
        .level-item { background:white; padding:10px; border-radius:8px; text-align:center; border:1px solid #e0e0e0; cursor:help; }
    </style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@300;400;500;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="login-container">
        <div class="login-header">
            <h1><i class="fas fa-industry"></i> Gestão de Equipamentos</h1>
            <p>Sistema de gerenciamento de equipamentos industriais</p>
        </div>
        <div class="login-body">
            <div id="error-message" class="error-message"><i class="fas fa-exclamation-circle"></i><span id="error-text"></span></div>
            <form id="loginForm" class="login-form">
                <div class="form-group"><label for="username"><i class="fas fa-user"></i> Usuário</label>
                    <div class="input-with-icon"><i class="fas fa-user-circle"></i><input type="text" id="username" placeholder="Digite seu usuário" required></div>
                </div>
                <div class="form-group"><label for="password"><i class="fas fa-lock"></i> Senha</label>
                    <div class="input-with-icon"><i class="fas fa-key"></i><input type="password" id="password" placeholder="Digite sua senha" required>
                    <button type="button" class="toggle-password" id="togglePassword"><i class="fas fa-eye"></i></button></div>
                </div>
                <button type="submit" class="login-btn" id="loginBtn"><i class="fas fa-sign-in-alt"></i> Entrar no Sistema</button>
            </form>
            <div class="login-info">
                <div class="levels-grid" id="levelsGrid"></div>
                <div style="text-align:center; margin-top:20px; font-size:13px; color:#7f8c8d;">
                    <p><i class="fas fa-shield-alt"></i> Sistema seguro | Acesso restrito</p>
                    <p>Último acesso: <span id="last-access">Nenhum registro</span></p>
                </div>
            </div>
        </div>
    </div>

    <script>
        const USUARIOS_AUTORIZADOS = {
            'operador': { senha:'operador123', nivel:'operador', nome:'Operador', icone:'fa-user', cor:'#3498db' },
            'supervisor': { senha:'supervisor456', nivel:'supervisor', nome:'Supervisor', icone:'fa-user-tie', cor:'#f39c12' },
            'administrador': { senha:'admin789', nivel:'administrador', nome:'Administrador', icone:'fa-user-shield', cor:'#e74c3c' },
            'manutencao': { senha:'manutencao2024', nivel:'manutencao', nome:'Manutenção', icone:'fa-tools', cor:'#9b59b6' },
            'engenharia': { senha:'engenharia789', nivel:'engenharia', nome:'Engenharia', icone:'fa-user-cog', cor:'#2ecc71' }
        };

        document.addEventListener('DOMContentLoaded', function() {
            // Preencher níveis
            const levelsGrid = document.getElementById('levelsGrid');
            Object.entries(USUARIOS_AUTORIZADOS).forEach(([username, info]) => {
                const levelItem = document.createElement('div');
                levelItem.className = 'level-item';
                levelItem.innerHTML = `<div style="color:${info.cor}"><i class="fas ${info.icone}"></i></div><div style="font-weight:600">${info.nome}</div><div style="font-size:11px">${username}</div>`;
                levelsGrid.appendChild(levelItem);
            });

            // Último acesso
            const lastAccess = localStorage.getItem('gestao_equipamentos_ultimo_acesso');
            if (lastAccess) document.getElementById('last-access').textContent = new Date(lastAccess).toLocaleString('pt-BR');

            // Eventos
            document.getElementById('loginForm').addEventListener('submit', function(e) {
                e.preventDefault();
                realizarLogin();
            });

            document.getElementById('togglePassword').addEventListener('click', function() {
                const passwordInput = document.getElementById('password');
                const type = passwordInput.type === 'password' ? 'text' : 'password';
                passwordInput.type = type;
                this.innerHTML = type === 'password' ? '<i class="fas fa-eye"></i>' : '<i class="fas fa-eye-slash"></i>';
            });
        });

        function realizarLogin() {
            const username = document.getElementById('username').value.trim();
            const password = document.getElementById('password').value;
            
            if (!username || !password) {
                mostrarErro('Preencha todos os campos.');
                return;
            }

            const usuario = USUARIOS_AUTORIZADOS[username];
            if (!usuario || usuario.senha !== password) {
                mostrarErro('Usuário ou senha incorretos.');
                return;
            }

            // Criar sessão
            const sessionData = {
                usuario: username,
                nivel: usuario.nivel,
                timestamp: new Date().getTime(),
                expira: new Date().getTime() + (8 * 60 * 60 * 1000)
            };
            
            localStorage.setItem('gestao_equipamentos_sessao', JSON.stringify(sessionData));
            localStorage.setItem('gestao_equipamentos_usuario', username);
            localStorage.setItem('gestao_equipamentos_nivel', usuario.nivel);
            localStorage.setItem('gestao_equipamentos_ultimo_acesso', new Date().toISOString());
            
            window.location.href = 'index.html';
        }

        function mostrarErro(mensagem) {
            const errorDiv = document.getElementById('error-message');
            document.getElementById('error-text').textContent = mensagem;
            errorDiv.classList.add('show');
            setTimeout(() => errorDiv.classList.remove('show'), 5000);
        }
    </script>
</body>
</html>
